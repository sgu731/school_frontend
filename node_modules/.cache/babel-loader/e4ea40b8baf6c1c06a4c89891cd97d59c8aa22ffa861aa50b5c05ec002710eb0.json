{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ct900\\\\Desktop\\\\LearningHelper0\\\\school_frontend\\\\src\\\\pages\\\\RoomsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RoomsPage() {\n  _s();\n  const [roomName, setRoomName] = useState(''); // �Ω�Ыةж����W��\n  const [allRooms, setAllRooms] = useState([]); // �������ж��C��\n  const [currentRoom, setCurrentRoom] = useState(null); // �ϥΪ̷��e�[�J���ж�\n  const [message, setMessage] = useState(''); // �Ω���ܮ���\n\n  // ����������ж��C��\n  const fetchAllRooms = async () => {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:5000/api/study/rooms/all', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    if (response.ok) {\n      const data = await response.json();\n      setAllRooms(data.rooms);\n    }\n  };\n\n  // ����ϥΪ̷��e�[�J���ж�\n  const fetchCurrentRoom = async () => {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:5000/api/study/rooms/current', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    if (response.ok) {\n      const data = await response.json();\n      setCurrentRoom(data.room);\n    }\n  };\n\n  // �Ыةж�\n  const createRoom = async () => {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:5000/api/study/rooms', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        name: roomName\n      })\n    });\n    const data = await response.json();\n    if (response.ok) {\n      setMessage('Room created successfully');\n      setRoomName(''); // �M�ſ�J��\n      fetchAllRooms(); // ��s�������ж��C��\n    } else {\n      setMessage('Failed to create room');\n    }\n  };\n\n  // �[�J�ж�\n  const joinRoom = async roomId => {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`http://localhost:5000/api/study/rooms/${roomId}/join`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    if (response.ok) {\n      setMessage('Joined room successfully');\n      fetchCurrentRoom(); // ��s�ϥΪ̷��e�[�J���ж�\n      fetchAllRooms(); // ��s�������ж��C��\n    } else {\n      setMessage(data.message || 'Failed to join room');\n    }\n  };\n\n  // �b�ե�[��������������ж��C���M�ϥΪ̷��e�[�J���ж�\n  useEffect(() => {\n    fetchAllRooms();\n    fetchCurrentRoom();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uFFFD\\u06F2\\u07EB\\uFFFD\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uFFFD\\u042B\\u0626\\u06F2\\u07EB\\uFFFD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uFFFD\\uFFFDJ\\uFFFDW\\uFFFD\\uFFFD\",\n        value: roomName,\n        onChange: e => setRoomName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: createRoom,\n        children: \"\\uFFFD\\u042B\\u0626\\u06F2\\u07EB\\uFFFD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uFFFD\\u06F2\\u07EB\\u01E6C\\uFFFD\\uFFFD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: allRooms.map(room => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [room.name, \" (\\uFFFD\\u0425D: \", room.creator_name, \")\", !currentRoom &&\n          /*#__PURE__*/\n          // �p�G�ϥΪ̨S���[�J����ж��A��ܥ[�J���s\n          _jsxDEV(\"button\", {\n            onClick: () => joinRoom(room.id),\n            children: \"\\uFFFD[\\uFFFDJ\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this)]\n        }, room.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), currentRoom && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uFFFDA\\uFFFD\\u062Be\\uFFFD\\uFFFD\\uFFFD\\u0436\\uFFFD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uFFFDA\\uFFFD\\u062Be\\uFFFDb: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: currentRoom.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 22\n        }, this), \" (\\uFFFD\\u0425D: \", currentRoom.creator_name, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(RoomsPage, \"KSsluP79FKSS0CzmYU3NMCAfl/0=\");\n_c = RoomsPage;\nexport default RoomsPage;\nvar _c;\n$RefreshReg$(_c, \"RoomsPage\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","RoomsPage","_s","roomName","setRoomName","allRooms","setAllRooms","currentRoom","setCurrentRoom","message","setMessage","fetchAllRooms","token","localStorage","getItem","response","fetch","headers","Authorization","ok","data","json","rooms","fetchCurrentRoom","room","createRoom","method","body","JSON","stringify","name","joinRoom","roomId","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","map","creator_name","id","_c","$RefreshReg$"],"sources":["C:/Users/ct900/Desktop/LearningHelper0/school_frontend/src/pages/RoomsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction RoomsPage() {\n  const [roomName, setRoomName] = useState(''); // �Ω�Ыةж����W��\n  const [allRooms, setAllRooms] = useState([]); // �������ж��C��\n  const [currentRoom, setCurrentRoom] = useState(null); // �ϥΪ̷��e�[�J���ж�\n  const [message, setMessage] = useState(''); // �Ω���ܮ���\n\n  // ����������ж��C��\n  const fetchAllRooms = async () => {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:5000/api/study/rooms/all', {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      setAllRooms(data.rooms);\n    }\n  };\n\n  // ����ϥΪ̷��e�[�J���ж�\n  const fetchCurrentRoom = async () => {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:5000/api/study/rooms/current', {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      setCurrentRoom(data.room);\n    }\n  };\n\n  // �Ыةж�\n  const createRoom = async () => {\n    const token = localStorage.getItem('token');\n    const response = await fetch('http://localhost:5000/api/study/rooms', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ name: roomName }),\n    });\n\n    const data = await response.json();\n    if (response.ok) {\n      setMessage('Room created successfully');\n      setRoomName(''); // �M�ſ�J��\n      fetchAllRooms(); // ��s�������ж��C��\n    } else {\n      setMessage('Failed to create room');\n    }\n  };\n\n  // �[�J�ж�\n  const joinRoom = async (roomId) => {\n    const token = localStorage.getItem('token');\n    const response = await fetch(`http://localhost:5000/api/study/rooms/${roomId}/join`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n    if (response.ok) {\n      setMessage('Joined room successfully');\n      fetchCurrentRoom(); // ��s�ϥΪ̷��e�[�J���ж�\n      fetchAllRooms(); // ��s�������ж��C��\n    } else {\n      setMessage(data.message || 'Failed to join room');\n    }\n  };\n\n  // �b�ե�[��������������ж��C���M�ϥΪ̷��e�[�J���ж�\n  useEffect(() => {\n    fetchAllRooms();\n    fetchCurrentRoom();\n  }, []);\n\n  return (\n    <div>\n      <h2>�۲߫�</h2>\n      <div>\n        <h3>�Ыئ۲߫�</h3>\n        <input\n          type=\"text\"\n          placeholder=\"��J�W��\"\n          value={roomName}\n          onChange={(e) => setRoomName(e.target.value)}\n        />\n        <button onClick={createRoom}>�Ыئ۲߫�</button>\n      </div>\n      <div>\n        <h3>�۲߫ǦC��</h3>\n        <ul>\n          {allRooms.map((room) => (\n            <li key={room.id}>\n              {room.name} (�ХD: {room.creator_name})\n              {!currentRoom && ( // �p�G�ϥΪ̨S���[�J����ж��A��ܥ[�J���s\n                <button onClick={() => joinRoom(room.id)}>�[�J</button>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n      {currentRoom && (\n        <div>\n          <h3>�A�ثe���ж�</h3>\n          <p>\n            �A�ثe�b: <strong>{currentRoom.name}</strong> (�ХD: {currentRoom.creator_name})\n          </p>\n        </div>\n      )}\n      {message && <p>{message}</p>}\n    </div>\n  );\n}\n\nexport default RoomsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}